"use strict";
var riaGallerySearchInput=document.getElementById("ria-gallery-search-input");null!==riaGallerySearchInput&&riaGallerySearchInput.addEventListener("input",function(){var e=this.value.toLowerCase();debug&&console.log("Search for ria named "+e);for(var a=document.getElementsByClassName("gallery-entry"),l=0;l<a.length;l++){-1===a[l].getElementsByClassName("ria-name")[0].innerHTML.toLowerCase().indexOf(e)?a[l].style.display="none":a[l].style.display="inline-block"}});
var closestNodeWithClass=function(t,e){for(var a=t;a.className!==e;)if(!(a=a.parentNode))return null;return a},getPageData=function(t,e){var a=document.getElementById(t+"-data");return null!==a?a.getAttribute("data-"+e):null};
var profileBtnChangePassword=document.getElementById("btn-change-password"),modalChangePassword=document.getElementById("modal-change-password"),modalChangePassword_closeXBtn=document.getElementsByClassName("modal-change-password-closeX"),modalChangePassword_saveBtn=document.getElementById("modal-change-password-save"),modalChangePassword_cancelBtn=document.getElementById("modal-change-password-cancel"),changePasswordModal_input1=document.getElementById("modal-change-password-input"),changePasswordModal_input2=document.getElementById("modal-change-password-wiederholt-input"),changePasswordModal_form=document.getElementById("modal-change-password-form");if(null!==profileBtnChangePassword&&(profileBtnChangePassword.onclick=function(){debug&&console.log("Open change password modal button clicked"),modalChangePassword.style.display="block"}),null!==modalChangePassword_closeXBtn)for(var i=0;i<modalChangePassword_closeXBtn.length;i++)modalChangePassword_closeXBtn[i].onclick=function(){debug&&console.log("Close change password modal button clicked"),closeModalAndResetValues()};window.onclick=function(a){a.target===modalChangePassword&&closeModalAndResetValues()},null!==modalChangePassword_saveBtn&&null!==changePasswordModal_form&&(modalChangePassword_saveBtn.onclick=function(){debug&&console.log("Submit change password form"),changePasswordModal_form.submit(),closeModalAndResetValues()}),null!==modalChangePassword_cancelBtn&&(modalChangePassword_cancelBtn.onclick=function(){debug&&console.log("Cancel button in change password modal clicked"),closeModalAndResetValues()});var closeModalAndResetValues=function(){null!==changePasswordModal_input1&&(changePasswordModal_input1.value=""),null!==changePasswordModal_input2&&(changePasswordModal_input2.value=""),null!==modalChangePassword&&(modalChangePassword.style.display="none"),debug&&console.log("Change password modal closed and modal values resetted")};
var modalEditRia=document.getElementById("modal-edit-ria"),modalEditRia_openBtn=document.getElementById("btn-edit-ria"),modalEditRia_closeXBtn=document.getElementsByClassName("modal-edit-ria-closeX"),modalEditRia_saveBtn=document.getElementById("modal-edit-ria-save"),modalEditRia_cancelBtn=document.getElementById("modal-edit-ria-cancel"),modalEditRia_chooseFileBtn=document.getElementById("modal-edit-ria-choose-file"),modalEditRia_fileInput=document.getElementById("modal-edit-ria-input-file"),modalEditRia_resetModalInputs=function(){debug&&console.log("Resetting edit ria modal input values to database values"),location.reload()},modalEditRia_closeModal=function(){null!==modalEditRia&&(modalEditRia.style.display="none"),modalEditRia_resetModalInputs(),debug&&console.log("Edit ria modal closed")};if(null!==modalEditRia_openBtn&&(modalEditRia_openBtn.onclick=function(){debug&&console.log("Open edit ria modal button clicked"),modalEditRia.style.display="block",debug&&console.log("Showing edit ria modal")}),null!==modalEditRia_closeXBtn&&null!==modalEditRia)for(var i=0;i<modalEditRia_closeXBtn.length;i++)modalEditRia_closeXBtn[i].onclick=function(){debug&&console.log("Close edit ria modal button clicked"),modalEditRia_closeModal()};window.onclick=function(l){l.target===modalEditRia&&null!==modalEditRia&&modalEditRia_closeModal()},null!==modalEditRia_saveBtn&&null!==modalEditRia&&(modalEditRia_saveBtn.onclick=function(){debug&&console.log("Saving ria values"),modalEditRia_closeModal()}),null!==modalEditRia_cancelBtn&&null!==modalEditRia&&(modalEditRia_cancelBtn.onclick=function(){debug&&console.log("Cancel editing ria button clicked"),modalEditRia_closeModal()}),null!==modalEditRia_chooseFileBtn&&null!==modalEditRia_fileInput&&(modalEditRia_chooseFileBtn.onclick=function(l){l.preventDefault(),debug&&console.log("Choose file button clicked"),modalEditRia_fileInput.click()});
var modalReviewRia=document.getElementById("modal-review-ria"),modalReviewRia_openBtn=document.getElementById("btn-review-ria"),modalReviewRia_closeXBtn=document.getElementsByClassName("modal-review-ria-closeX"),modalReviewRia_saveBtn=document.getElementById("modal-review-ria-save"),modalReviewRia_closeBtn=document.getElementById("modal-review-ria-close"),modalReviewRia_resetModalInputs=function(){if(debug&&console.log("Reset review ria modal inputs"),null!==modalReviewRia){for(var e=modalReviewRia.getElementsByClassName("label-rating selected"),l=0;l<e.length;l++)e[l].classList.remove("selected");var i=document.getElementById("modal-review-ria-description");null!==i&&(i.value="")}},modalReviewRia_closeModal=function(){null!==modalReviewRia&&(modalReviewRia.style.display="none"),modalReviewRia_resetModalInputs(),debug&&console.log("Review ria modal closed")};if(null!==modalReviewRia_openBtn&&(modalReviewRia_openBtn.onclick=function(){debug&&console.log("Open review ria modal button clicked"),modalReviewRia.style.display="block"}),null!==modalReviewRia_closeXBtn)for(var i=0;i<modalReviewRia_closeXBtn.length;i++)modalReviewRia_closeXBtn[i].onclick=function(){modalReviewRia_closeModal()};window.onclick=function(e){e.target===modalReviewRia&&modalReviewRia_closeModal()},null!==modalReviewRia_saveBtn&&(modalReviewRia_saveBtn.onclick=function(){debug&&console.log("Save review"),document.getElementById("ria-review-modal").submit(),modalReviewRia_closeModal()}),null!==modalReviewRia_closeBtn&&(modalReviewRia_closeBtn.onclick=function(){modalReviewRia_closeModal()});
var modalUploadRia=document.getElementById("modal-upload-ria"),modalUploadRia_openBtn=document.getElementById("btn-upload-ria"),modalUploadRia_closeXBtn=document.getElementsByClassName("modal-upload-ria-closeX"),modalUploadRia_saveBtn=document.getElementById("modal-upload-ria-save"),modalUploadRia_closeBtn=document.getElementById("modal-upload-ria-close"),modalUploadRia_chooseFileBtn=document.getElementById("modal-upload-ria-choose-file"),modalUploadRia_fileInput=document.getElementById("modal-upload-ria-input-file"),modalEditRia_iconRadios=document.getElementsByClassName("modal-upload-ria-icon-radio"),modalUploadRia_resetModalInputs=function(){debug&&console.log("Resetting upload ria modal input values to database values"),location.reload()},modalUploadRia_closeModal=function(){null!==modalUploadRia&&(modalUploadRia.style.display="none"),modalUploadRia_resetModalInputs(),debug&&console.log("Upload ria modal closed")};if(null!==modalUploadRia_openBtn&&null!==modalUploadRia&&(modalUploadRia_openBtn.onclick=function(){debug&&console.log("Open upload ria modal button clicked"),modalUploadRia.style.display="block"}),null!==modalUploadRia_closeXBtn&&null!==modalUploadRia)for(var j=0;j<modalUploadRia_closeXBtn.length;j++)modalUploadRia_closeXBtn[j].onclick=function(){modalUploadRia_closeModal()};if(window.onclick=function(l){l.target===modalUploadRia&&null!==modalUploadRia&&modalUploadRia_closeModal()},null!==modalUploadRia_saveBtn&&null!==modalUploadRia&&(modalUploadRia_saveBtn.onclick=function(){debug&&console.log("Upload ria"),document.getElementById("ria-upload-form").submit()}),null!==modalUploadRia_closeBtn&&null!==modalUploadRia&&(modalUploadRia_closeBtn.onclick=function(){modalUploadRia_closeModal()}),null!==modalUploadRia_chooseFileBtn&&null!==modalUploadRia_fileInput&&(modalUploadRia_chooseFileBtn.onclick=function(l){l.preventDefault(),debug&&console.log("Choose file button clicked"),modalUploadRia_fileInput.click()}),null!==modalEditRia_iconRadios)for(var i=0;i<modalEditRia_iconRadios.length;i++)modalEditRia_iconRadios[i].onclick=function(){removeSelectedFromAllIconRadios(),this.classList.add("selected"),this.getElementsByTagName("input")[0].checked=!0};var removeSelectedFromAllIconRadios=function(){if(debug&&console.log("Remove selected attribute from all icons"),null!==modalEditRia_iconRadios)for(var l=0;l<modalEditRia_iconRadios.length;l++)modalEditRia_iconRadios[l].classList.remove("selected"),modalEditRia_iconRadios[l].getElementsByTagName("input")[0].setAttribute("checked","")};null!==modalUploadRia_fileInput&&modalUploadRia_fileInput.addEventListener("change",function(){var l=modalUploadRia_fileInput.value;if(l){var o=l.indexOf("\\")>=0?l.lastIndexOf("\\"):l.lastIndexOf("/"),a=l.substring(o);0!==a.indexOf("\\")&&0!==a.indexOf("/")||(a=a.substring(1)),debug&&console.log("Update displayed name of chosen file"),document.getElementById("modal-upload-ria-file-name").innerHTML=a}});
var colorInput=document.getElementById("profile-color-input");null!==colorInput&&colorInput.addEventListener("change",function(e){debug&&console.log("Profile color changed to "+e.target.value),document.getElementById("profile-update-profile-form").submit()});
var editableStarRatings=document.getElementsByClassName("editable-star-rating"),noneditableRatings=document.getElementsByClassName("noneditable-star-rating");if(null!==editableStarRatings){debug&&console.log("Initialize editable star ratings");for(i=0;i<editableStarRatings.length;i++)for(var inputs=editableStarRatings[i].getElementsByClassName("input-rating"),j=0;j<inputs.length;j++)inputs[j].addEventListener("change",function(){for(var t=document.getElementsByClassName("label-rating selected"),a=0;a<t.length;a++)t[a].classList.remove("selected");var e=closestNodeWithClass(this,"label-rating");null!==e&&e.classList.add("selected")})}for(var createNonEditableStarRating=function(t,a){var e=getStarNumFromRating(t);debug&&console.log("DB rating value of "+t+" processed to "+e+" stars to be shown");for(var n="",i=5;i>=1;i--)n+='<span class="star big-star star'+i,e-i+1==.5?n+=" half-filled":Math.floor(e)-i>=0&&(n+=" filled"),n+='"></span>';null!==a&&(a.innerHTML=n)},getStarNumFromRating=function(t){if(t<0||t>5)return 0;var a=t-Math.floor(t);return a>=0&&a<.3?Math.floor(t):a>=.3&&a<.7?Math.floor(t)+.5:Math.ceil(t)},i=0;i<noneditableRatings.length;i++){var ratingVal=noneditableRatings[i].dataset.rating;debug&&console.log("DB rating value is "+ratingVal),null!==ratingVal&&createNonEditableStarRating(ratingVal,noneditableRatings[i])}